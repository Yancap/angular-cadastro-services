
<main class="container">
  <div class=" card mt-3">
    <div class="card-header ">
      <div class="float-left">
        <h1>Cadastro de cursos</h1>
      </div>
      <div class="py-4">
        <div class="d-flex gap-2">
          <div class="flex-grow-1">
            <label for="">Nome</label>
            <input type="text" class="form-control" [(ngModel)]="name" />
          </div>
          <div class="flex-grow-1">
            <label for="">Categoria</label>
            <input type="text" class="form-control" [(ngModel)]="category" />
          </div>
        </div>
        <button type="button" class="btn btn-primary mt-2" (click)="handleAdd()">Adicionar</button>
      </div>
    </div>
    <div class="card-body">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>#</th>
            <th>Curso</th>
            <th>Categoria</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let curso of courseList; let i=index">
            <td>{{i}}</td>
            <td>
              <span *ngIf="!isUpdating && lineThatIsUpdating !== i; else updatingName">
                {{curso.name}}
              </span>
              <ng-template #updatingName>
                <input type="text" class="form-control" [(ngModel)]="newName" />
              </ng-template>
            </td>
            <td>
              <span *ngIf="!isUpdating && lineThatIsUpdating !== i; else updatingCategory">
                {{curso.category}}
              </span>
              <ng-template #updatingCategory>
                <input type="text" class="form-control" [(ngModel)]="newCategory" />
              </ng-template>
            </td>
            <td>
              
              <span class="d-flex gap-2" *ngIf="!isUpdating && lineThatIsUpdating !== i; else updating">
                <button class="btn btn-warning mb-1 btn-sm" (click)="handleToggleUpdate(i)">
                  Atualizar
                </button>
  
                <button class="btn btn-outline-danger mb-1 btn-sm" (click)="handleRemove(i)">
                  Remover
                </button>
              </span>

              <ng-template #updating>
                <span class="d-flex gap-2">
                  <button class="btn btn-primary mb-1 btn-sm" (click)="handleUpdate(i)">
                    Confirmar
                  </button>
    
                  <button class="btn btn-outline-danger mb-1 btn-sm" (click)="handleToggleUpdate()">
                    Cancelar
                  </button>
                </span>
              </ng-template>
              
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</main>
